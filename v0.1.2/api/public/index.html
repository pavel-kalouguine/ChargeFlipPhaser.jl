<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · ChargeFlipPhaser</title><meta name="title" content="API Reference · ChargeFlipPhaser"/><meta property="og:title" content="API Reference · ChargeFlipPhaser"/><meta property="twitter:title" content="API Reference · ChargeFlipPhaser"/><meta name="description" content="Documentation for ChargeFlipPhaser."/><meta property="og:description" content="Documentation for ChargeFlipPhaser."/><meta property="twitter:description" content="Documentation for ChargeFlipPhaser."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ChargeFlipPhaser</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Input-data"><span>Input data</span></a></li><li><a class="tocitem" href="#Running-the-program"><span>Running the program</span></a></li><li><a class="tocitem" href="#Custom-phasing-algorithms"><span>Custom phasing algorithms</span></a></li><li><a class="tocitem" href="#Modifying-program-behavior"><span>Modifying program behavior</span></a></li><li><a class="tocitem" href="#Saving-results"><span>Saving results</span></a></li></ul></li><li><a class="tocitem" href="../private/">Internal API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/master/docs/src/api/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h1><h2 id="Input-data"><a class="docs-heading-anchor" href="#Input-data">Input data</a><a id="Input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Input-data" title="Permalink"></a></h2><h3 id="Symmetry-and-lattice-parameters"><a class="docs-heading-anchor" href="#Symmetry-and-lattice-parameters">Symmetry and lattice parameters</a><a id="Symmetry-and-lattice-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Symmetry-and-lattice-parameters" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.DiffractionData" href="#ChargeFlipPhaser.DiffractionData"><code>ChargeFlipPhaser.DiffractionData</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DiffractionData{N,D,T&lt;:Integer}</code></pre><p>A structure representing a diffraction pattern in N-dimensional space.</p><p>The <code>DiffractionData</code> structure is used to store information about a diffraction pattern, including the Bragg peaks and their intensities.</p><p><strong>Type parameters:</strong></p><ul><li><code>N</code>: The number of dimensions of the reciprocal lattice.</li><li><code>D</code>: The number of dimensions of the real space. For the periodic crystals,        <code>D</code> is equal to <code>N</code>.</li><li><code>T</code>: The type of the integer used for indexing (e.g., <code>Int</code>).</li></ul><p><strong>Fields</strong></p><ul><li><code>G</code>: A <code>SpaceGroupQuotient</code> object representing the symmetry group of the       structure.</li><li><code>md</code>: The metric data of the crystal structure, represented by a DxN static        matrix. Given the integer <code>N</code>-dimensional vector <code>k</code>, the value of the corresponding       diffraction wavevector is <code>md*k</code>. For the real physical data, the units of <code>md</code> are Å^-1</li><li><code>bps</code>: A vector of <code>BraggPeaksOrbit</code> objects representing the orbits of Bragg peaks       in the diffraction pattern.</li><li><code>k_to_bp</code>: A dictionary mapping wave vectors to their corresponding       <code>BraggPeaksOrbit</code> objects. This field is used to efficiently check if a       wave vector is already present in the diffraction pattern and to retrieve       the associated Bragg peak orbit when needed. It ensures that each wave       vector is uniquely associated with a single Bragg peak orbit.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/diffractiondata.jl#L22-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.metric_data_inconsistency" href="#ChargeFlipPhaser.metric_data_inconsistency"><code>ChargeFlipPhaser.metric_data_inconsistency</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">metric_data_inconsistency(dd::DiffractionData{N,D,T})::Float64 where {N,D,T&lt;:Integer}</code></pre><p>Check for inconsistencies in the metric data of the <code>DiffractionData</code> object.</p><p><strong>Description:</strong></p><p>For the metric data <code>md</code> to be consistent with the symmetry group, the matrix <code>r=md&#39;*md</code> must be invariant with respect to the action of the symmetry group <code>G</code>. Namely, for every  element g∈G, the following condition must hold: <code>g.a&#39;*r*g.a = r</code>. This function computes  the matrix <code>r</code> and returns the tolerance to which this condition is satisfied.</p><p><strong>Arguments:</strong></p><ul><li><code>dd</code>: The <code>DiffractionData</code> object to check.</li></ul><p><strong>Returns:</strong></p><ul><li>The ratio of the maximal absolute value of of the elements of the matrix <code>g.a&#39;*r*g.a - r</code> to the    trace of <code>r</code>. This value should be close to zero for the metric data to be consistent with the symmetry group.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/diffractiondata.jl#L79-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.physicalnorm" href="#ChargeFlipPhaser.physicalnorm"><code>ChargeFlipPhaser.physicalnorm</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>physicalnorm(k::SVector{N, T}, dd::DiffractionData{N,D,T}) where {N,D,T&lt;:Integer}</p><p>Compute the norm of a physical wave vector corresponding to the integer vector <code>k</code>using     the metric data of the <code>DiffractionData</code> object.</p><p><strong>Arguments</strong></p><ul><li><code>k</code>: An integer wave vector (a vector of Miller indices).</li><li><code>dd</code>: The <code>DiffractionData</code> object containing the metric data.</li></ul><p><strong>Returns:</strong></p><ul><li>The physical norm of the physical wave vector corresponding to <code>k</code>, calculated as <code>norm(dd.md*k)</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/diffractiondata.jl#L111-L123">source</a></section></article><h3 id="Reflections"><a class="docs-heading-anchor" href="#Reflections">Reflections</a><a id="Reflections-1"></a><a class="docs-heading-anchor-permalink" href="#Reflections" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.add_peak!" href="#ChargeFlipPhaser.add_peak!"><code>ChargeFlipPhaser.add_peak!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> add_peak!(dd::DiffractionData{N,D,T}, k::SVector{N,T}, I::AbstractFloat)</code></pre><p>Add a new orbit of Bragg peaks to the <code>DiffractionData</code> object.</p><p><strong>Description:</strong></p><p>This function creates a new <code>BraggPeaksOrbit</code> object corresponding to the wave vector <code>k</code> and adds it to the <code>DiffractionData</code> object <code>dd</code>. If the wave vector is already present in the diffraction data, it will not be added again. The function checks if the orbit is extinct (i.e., if it belongs to an extinct orbit) and throws an error if so.</p><p>If the wave vector belongs to an extinct orbit, the function will     throw an <code>ArgumentError</code>.</p><p><strong>Arguments:</strong></p><ul><li><code>dd</code>: The <code>DiffractionData</code> object to which the Bragg peak will be added.</li><li><code>k</code>: A vector representing the wave vector of the Bragg peak.</li><li><code>I</code>: The intensity of the Bragg peak.</li></ul><p><strong>Returns:</strong></p><pre><code class="nohighlight hljs">- the number of Bragg peaks in the added orbit. If the wavevector is already
taken into account, the function will return 0.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/diffractiondata.jl#L126-L146">source</a></section></article><h3 id="Form-factors"><a class="docs-heading-anchor" href="#Form-factors">Form factors</a><a id="Form-factors-1"></a><a class="docs-heading-anchor-permalink" href="#Form-factors" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.WeightedF0" href="#ChargeFlipPhaser.WeightedF0"><code>ChargeFlipPhaser.WeightedF0</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WeightedF0</code></pre><p>A callable object representing the weighted non-dispersive part of the atomic  scattering factor for a material of a given composition.</p><p><strong>Fields</strong></p><ul><li><code>v</code>: A vector of tuples, where each tuple contains the <code>F0WaasKirf</code> object for </li></ul><p>an atom or ion and the fraction of this type of atoms in the material.</p><p><strong>Constructors</strong></p><ul><li><code>WeightedF0(c::Vector{Tuple{String, Float64}})</code>: Creates a <code>WeightedF0</code> object </li></ul><p>from a vector of tuples, where each tuple contains the chemical symbol of the  atom or ion and its fraction in the material.</p><p><strong>Example</strong></p><p>The object should be called with a single real argument <span>$κ = sin(θ) / λ$</span>.</p><pre><code class="language-julia-repl hljs">julia&gt; w=WeightedF0([(&quot;As&quot;, 1.0), (&quot;Ga&quot;, 1.0)]); [w(κ) for κ in 0.0:0.2:1.0]
6-element Vector{Float64}:
 32.00163144733964
 25.58541327156792
 19.004924495418177
 13.806263061220022
 10.184215575459087
  8.03425166926575</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/f0_waaskirf.jl#L40-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.formfactors_synthetic" href="#ChargeFlipPhaser.formfactors_synthetic"><code>ChargeFlipPhaser.formfactors_synthetic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">formfactors_synthetic(dd::DiffractionData, windowing_function::Function)::Vector{Float64}</code></pre><p>Computes the regularizing part of the form factors to use with the diffraction data.</p><p><strong>Arguments</strong></p><ul><li><code>dd::DiffractionData</code>: The diffraction data object.</li><li><code>windowing_function::Function</code>: The regularizing windowing function to apply.</li></ul><p><strong>Returns</strong></p><ul><li>A vector of form factors.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/diffractiondata.jl#L244-L255">source</a></section></article><h2 id="Running-the-program"><a class="docs-heading-anchor" href="#Running-the-program">Running the program</a><a id="Running-the-program-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-program" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.Phaser" href="#ChargeFlipPhaser.Phaser"><code>ChargeFlipPhaser.Phaser</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Phaser{N}</code></pre><p>Data structure representing the phaser state.</p><p><strong>Fields</strong></p><ul><li><code>dd</code>: The diffraction data object.</li><li><code>real_orbits</code>: The indices of the real orbits in the diffraction data.</li><li><code>complex_orbits</code>: The indices of the complex orbits in the diffraction data.</li><li><code>v</code>: The generator of the cyclic sampling grid.</li><li><code>numamps</code>: The number of 1D amplitudes, not counting the antipodes and the zero wavevector.</li><li><code>ampl</code>: The vector of the absolute values of amplitudes, in the order of orbits in dd.</li><li><code>p2f_r</code>: Sparse matrix used to set amplitudes for real orbits.</li><li><code>p2f_c1</code>: Sparse matrix used to set amplitudes for complex orbits.</li><li><code>p2f_c2</code>: Sparse matrix used to set amplitudes for complex orbits, conjugated.</li><li><code>f</code>: The vector of phased amplitudes (on the reciprocal sampling grid)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phaser.jl#L5-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.ball_autocorr" href="#ChargeFlipPhaser.ball_autocorr"><code>ChargeFlipPhaser.ball_autocorr</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ball_autocorr(x::Float64)::Float64</code></pre><p>Spherical ball autocorrelation function</p><p>Computes the autocorrelation function of the indicator functions of two  three-dimensional spherical balls of diameter 1. The result is normalized  to 1 at the origin.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: The distance from the center of the balls, normalized to the radius </li></ul><p>(which is 0.5).</p><p><strong>Returns</strong></p><ul><li><code>Float64</code>: The value of the autocorrelation function at distance <code>x</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/windowing.jl#L3-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.do_phasing!" href="#ChargeFlipPhaser.do_phasing!"><code>ChargeFlipPhaser.do_phasing!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">do_phasing!(phaser::Phaser; algorithm::AbstractPhasingAlgorithm,
hooks::AbstractHooks=DefaultHooks(), saver::AbstractSaver=DefaultSaver(),
max_iterations::Int=1000)</code></pre><p>Perform the phasing algorithm on the given <code>Phaser</code> object.</p><p><strong>Arguments</strong></p><ul><li><code>phaser</code>: The <code>Phaser</code> object to modify.</li><li><code>algorithm</code>: The phasing algorithm to use.</li><li><code>hooks</code>: The hooks to call during the phasing process.</li><li><code>saver</code>: The saver to use for saving results.</li><li><code>max_iterations</code>: The maximum number of iterations to perform.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phaser.jl#L171-L185">source</a></section></article><h3 id="GUI-monitor"><a class="docs-heading-anchor" href="#GUI-monitor">GUI monitor</a><a id="GUI-monitor-1"></a><a class="docs-heading-anchor-permalink" href="#GUI-monitor" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.PhasingMonitor" href="#ChargeFlipPhaser.PhasingMonitor"><code>ChargeFlipPhaser.PhasingMonitor</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PhasingMonitor</code></pre><p>GUI monitor for the phasing application.</p><p><strong>Fields</strong></p><ul><li><p><code>fig::Figure</code>   Makie <code>Figure</code> representing the monitor&#39;s GUI window.</p></li><li><p><code>ops::Observable{PhasingStatus}</code>   Observable triggering widget redraws whenever the phasing status changes.</p></li><li><p><code>olimits::Observable{Tuple{Float64, Float64}}</code>   Observable for the extrema of the charge density, used to update the corresponding label in the GUI.</p></li><li><p><code>c::Condition</code>   Condition object used to notify the main program about user events.</p></li><li><p><code>state::Observable{MonitorState}</code>   Current state of the monitor window (<code>Created</code>, <code>Running</code>, or <code>Paused</code>).</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phasingmonitor.jl#L51-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.Cut2D" href="#ChargeFlipPhaser.Cut2D"><code>ChargeFlipPhaser.Cut2D</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Cut2D{N}</code></pre><p>Representation of a 2D section (cut) of the charge density in an N-dimensional lattice.</p><p><strong>Type Parameters</strong></p><ul><li><code>N</code>: The dimension of the problem.</li></ul><p><strong>Fields</strong></p><ul><li><p><code>direction::SMatrix{2,N}</code>   A 2×N matrix whose columns are the lattice vectors spanning the cutting plane.</p></li><li><p><code>origin::SVector{N,Float64}</code>   Coordinates of the origin of the cutting plane in N-dimensional space.</p></li><li><p><code>size::Tuple{Int,Int}</code>   The dimensions of the grid on which the density cut is computed.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phasingmonitor.jl#L172-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.add_panel!" href="#ChargeFlipPhaser.add_panel!"><code>ChargeFlipPhaser.add_panel!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_panel!(pm::PhasingMonitor, (i, j)::Tuple, cut::Cut2D, title::String, aspect::Real)</code></pre><p>Add a panel to the GUI monitor window to visualize a 2D section of the charge density.</p><p>The panel is placed at grid position <code>(i, j)</code> within the monitor layout and is dynamically updated whenever the phasing status or charge-density limits change.</p><p><strong>Arguments</strong></p><ul><li><code>pm::PhasingMonitor</code>: The monitor window to which the panel will be added.</li><li><code>(i, j)::Tuple</code>: Grid coordinates (row, column) in the monitor&#39;s layout.</li><li><code>cut::Cut2D</code>: The specification of the 2D section to visualize.</li><li><code>title::String</code>: Title displayed above the panel.</li><li><code>aspect::Real</code>: Aspect ratio of the panel&#39;s axes.</li></ul><p><strong>Notes</strong></p><ul><li>The charge density cut is computed using a <a href="../private/#ChargeFlipPhaser.Cutter"><code>Cutter</code></a> constructed from <code>pm</code>&#39;s current <code>Phaser</code>.</li><li>Panel content updates automatically via observables linked to <code>pm.ops</code> and <code>pm.olimits</code>.</li><li>Decorations are hidden for a cleaner visual layout.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phasingmonitor.jl#L337-L356">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.display" href="#ChargeFlipPhaser.display"><code>ChargeFlipPhaser.display</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">display(pm::PhasingMonitor)</code></pre><p>Display the GUI window of a phasing monitor.</p><p>This calls <code>Base.display</code> on the underlying Makie figure (<code>pm.fig</code>), bringing up the monitor window for user interaction.</p><p><strong>Arguments</strong></p><ul><li><code>pm::PhasingMonitor</code>: The monitor whose GUI window should be displayed.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phasingmonitor.jl#L127-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.MonitorHooks" href="#ChargeFlipPhaser.MonitorHooks"><code>ChargeFlipPhaser.MonitorHooks</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MonitorHooks &lt;: AbstractHooks</code></pre><p>Hooks for integrating the phasing workflow with a <a href="#ChargeFlipPhaser.PhasingMonitor"><code>PhasingMonitor</code></a> GUI.</p><p><code>MonitorHooks</code> wraps a <code>PhasingMonitor</code> instance and can be passed to the phasing engine so that GUI updates occur automatically at key points in the workflow.</p><p><strong>Fields</strong></p><ul><li><code>pm::PhasingMonitor</code>   The GUI monitor window to be updated during phasing.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phasingmonitor.jl#L142-L154">source</a></section></article><h2 id="Custom-phasing-algorithms"><a class="docs-heading-anchor" href="#Custom-phasing-algorithms">Custom phasing algorithms</a><a id="Custom-phasing-algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-phasing-algorithms" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.AbstractPhasingAlgorithm" href="#ChargeFlipPhaser.AbstractPhasingAlgorithm"><code>ChargeFlipPhaser.AbstractPhasingAlgorithm</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractPhasingAlgorithm</code></pre><p>Abstract supertype for all phasing algorithms in <code>ChargeFlipPhaser</code>.</p><p>To define a new algorithm, create a subtype:</p><pre><code class="nohighlight hljs">struct MyAlgorithm &lt;: AbstractPhasingAlgorithm
    # fields
end</code></pre><p>and implement the following methods:</p><ul><li><code>flip_charge!(rho::Vector{Float64}, algorithm::MyAlgorithm)</code></li><li><code>flip_amplitudes!(wa::WorkingAmplitudes, algorithm::MyAlgorithm)</code></li></ul><p>These methods are part of the <code>ChargeFlipPhaser</code> API. They should be either imported before definition:</p><pre><code class="nohighlight hljs">    import ChargeFlipPhaser: flip_charge!, flip_amplitudes!</code></pre><p>or defined with the module prefix:</p><pre><code class="nohighlight hljs">    function ChargeFlipPhaser.flip_charge!(...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/types.jl#L4-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.WorkingAmplitudes" href="#ChargeFlipPhaser.WorkingAmplitudes"><code>ChargeFlipPhaser.WorkingAmplitudes</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WorkingAmplitudes</code></pre><p>Container for observed, working, and backprojected amplitudes used in the phasing workflow.</p><p><strong>Fields</strong></p><ul><li><p><code>a_r::Vector{Float64}</code>   Observed amplitudes for the real orbits.</p></li><li><p><code>a_c::Vector{Float64}</code>   Observed amplitudes for the complex orbits.</p></li><li><p><code>f_r::Vector{Float64}</code>   Current working amplitudes for the real orbits.</p></li><li><p><code>f_c::Vector{ComplexF64}</code>   Current working amplitudes for the complex orbits.</p></li><li><p><code>f_r_back::Vector{ComplexF64}</code>   Backprojected amplitudes for the real orbits.</p></li><li><p><code>f_c_back::Vector{ComplexF64}</code>   Backprojected amplitudes for the complex orbits.</p></li></ul><p><strong>Constructors</strong></p><ul><li><code>WorkingAmplitudes(phaser::Phaser)</code>: Create a new <code>WorkingAmplitudes</code> object from a <code>Phaser</code> object.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/phaser.jl#L94-L121">source</a></section></article><h2 id="Modifying-program-behavior"><a class="docs-heading-anchor" href="#Modifying-program-behavior">Modifying program behavior</a><a id="Modifying-program-behavior-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-program-behavior" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.AbstractHooks" href="#ChargeFlipPhaser.AbstractHooks"><code>ChargeFlipPhaser.AbstractHooks</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractHooks</code></pre><p>Abstract supertype for hooks used in the phasing process. To define a new hooks type, create a subtype:</p><pre><code class="nohighlight hljs">struct MyHooks &lt;: AbstractHooks
    # fields
end</code></pre><p>and implement the following methods:</p><ul><li><code>on_go(hooks::MyHooks)</code></li><li><code>on_show(hooks::MyHooks, phaser::Phaser,  ρ::Vector{Float64}, iteration::Int)</code></li><li><code>is_done(hooks::MyHooks)</code></li></ul><p>These methods are part of the <code>ChargeFlipPhaser</code> API. They should be either imported before definition:</p><pre><code class="nohighlight hljs">    import ChargeFlipPhaser: on_go, on_show, is_done</code></pre><p>or defined with the module prefix:</p><pre><code class="nohighlight hljs">    function ChargeFlipPhaser.on_show(...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/types.jl#L32-L56">source</a></section></article><h2 id="Saving-results"><a class="docs-heading-anchor" href="#Saving-results">Saving results</a><a id="Saving-results-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-results" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.AbstractSaver" href="#ChargeFlipPhaser.AbstractSaver"><code>ChargeFlipPhaser.AbstractSaver</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractSaver</code></pre><p>Abstract supertype for saving results. To define a new saver type, create a subtype:</p><pre><code class="nohighlight hljs">struct MySaver &lt;: AbstractSaver
    # fields
end</code></pre><p>and implement the following method:</p><ul><li><code>function save_result(saver::MySaver, phaser::Phaser, wa::WorkingAmplitudes)</code></li></ul><p>This method is part of the <code>ChargeFlipPhaser</code> API. It should be either imported before definition:</p><pre><code class="nohighlight hljs">    import ChargeFlipPhaser: save_result</code></pre><p>or defined with the module prefix:</p><pre><code class="nohighlight hljs">    function ChargeFlipPhaser.save_result(...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/types.jl#L59-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ChargeFlipPhaser.CSVSaver" href="#ChargeFlipPhaser.CSVSaver"><code>ChargeFlipPhaser.CSVSaver</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CSVSaver &lt;: AbstractSaver</code></pre><p>Type for saving results in CSV format.</p><p><strong>Fields</strong></p><ul><li><code>output_file_path</code>: The path to the output CSV file where results will be saved.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/pavel-kalouguine/ChargeFlipPhaser.jl/blob/74c5c02bdc94df42831e23dcdf839fd3ec93c7b5/src/saver.jl#L2-L9">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../private/">Internal API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Thursday 14 August 2025 14:42">Thursday 14 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
